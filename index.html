<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>קטלוג בשמי דלוקס סנס</title>
  <meta name="description" content="בשמים בייצור פרטי • הזמנה ושאלות ב-WhatsApp" />

  <!-- Fonts: Assistant לעברית; Inter לשמות האנגליים -->
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&family=Inter:wght@600;700;800&display=swap" rel="stylesheet" />

  <!-- Open Graph -->
  <meta property="og:title" content="קטלוג בשמי דלוקס סנס" />
  <meta property="og:description" content="בשמים בייצור פרטי • קנייה דרך WhatsApp" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="images/og.jpg" />
  <link rel="icon" href="images/favicon.ico" />

  <style>
    :root{
      --logo-h: 160px;
      --bg: #f7f3ec;
      --card: #ffffff;
      --fg: #1a1a1a;
      --muted:#6f6a5f;
      --accent:#b07a2a;
      --border:#eadfce;
      --shadow: 0 6px 18px rgba(50,24,0,.06);
      --s-1: 6px; --s-2: 10px; --s-3: 14px; --s-4: 18px; --s-5: 22px;
      --input-h: 42px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      color:var(--fg);
      font-family: Assistant, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      -webkit-font-smoothing: antialiased;
      scroll-behavior:smooth;

      /* רקע אלגנטי ועדין */
      background-color: var(--bg);
      background-image:
        radial-gradient(1200px 500px at 15% -10%, #ffffff 0 40%, transparent 70%),
        radial-gradient(900px 400px at 110% 0%, #fff3e0 0 30%, transparent 70%),
        linear-gradient(#fff, var(--bg)),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 32 32"><g fill="none" stroke="%23eadfce" stroke-width=".35" opacity=".25"><path d="M0 16H32M16 0V32"/></g></svg>');
      background-size: auto, auto, auto, 64px 64px;
      background-repeat: no-repeat, no-repeat, no-repeat, repeat;
    }
    body::before{
      content:""; position: fixed; inset: 0; pointer-events:none;
      mix-blend-mode: multiply; opacity:.04;
      background-image: url('data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" seed="7"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
      background-size: 300px 300px;
    }

    a{color:inherit;text-decoration:none}

    .wrap{max-width:1160px;margin:0 auto;padding:0 16px 56px}
    header{text-align:center;padding:32px 16px 8px}
    .logo{display:block;margin:0 auto var(--s-2);height:var(--logo-h);max-width:90%;object-fit:contain}
    header h1{
      font-weight:800;font-size:clamp(26px,3.5vw,40px);margin:0 0 var(--s-1);letter-spacing:.2px
    }
    header p{margin:var(--s-1) 0;color:var(--muted);font-weight:400}
    .cta{
      display:inline-block;margin-top:var(--s-2);padding:12px 18px;border:1px solid var(--accent);border-radius:14px;font-weight:700;
      background:linear-gradient(#fff,#fff9f0);transition:.2s transform,.2s box-shadow,.2s background;box-shadow:var(--shadow)
    }
    .cta:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(176,122,42,.12)}

    /* FAQ למעלה */
    .faq{margin:20px 0 20px}
    .faq h2{font-weight:700;font-size:20px;margin:0 0 var(--s-1)}
    .faq details{border:1px solid var(--border);border-radius:12px;padding:10px 12px;margin:8px 0;background:#fff;box-shadow:var(--shadow)}

    /* סרגל פילטרים */
    .filters{
      position:relative;
      background:#fff; border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow);
      padding:12px; margin:0 0 22px;
    }
    .filters .row{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
    }
    .f-field{display:flex; align-items:center; gap:8px}
    .f-label{font-weight:700; font-size:14px}
    .f-input, .f-select{
      height:var(--input-h);
      padding:0 12px; border:1px solid var(--border); border-radius:10px; background:#fff; font-weight:600; min-width: 200px;
    }
    .f-input{min-width:240px}
    @media (max-width: 700px){
      .filters .row{flex-direction:column; align-items:stretch}
      .f-input, .f-select{width:100%; min-width:unset}
      .f-field{width:100%}
    }

    /* גריד מוצרים */
    .grid{display:grid;gap:var(--s-4);grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    @media (max-width: 900px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr))} }
    @media (max-width: 600px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr))} }

    .card{
      background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px;display:flex;flex-direction:column;box-shadow:var(--shadow);
      transition:.2s transform,.2s box-shadow
    }
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 24px rgba(32,18,0,.08)}

    /* קרוסלה */
    .imagebox{position:relative;border-radius:12px;overflow:hidden;background:#f1f1f1;height:280px}
    .imagebox img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block;opacity:0;transition:opacity .2s}
    .imagebox img.active{opacity:1}
    .cnav{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:0 8px;pointer-events:none; direction:ltr;}
    .cbtn{pointer-events:auto;width:40px;height:40px;border-radius:999px;border:1px solid var(--border); background:#fff9f0; display:flex;align-items:center;justify-content:center; box-shadow:var(--shadow)}
    .cbtn svg{width:18px;height:18px}
    .imagebox.single .cnav{display:none}

    /* תג מותג */
    .brand-tag{
      align-self:center;
      display:inline-flex; gap:8px; align-items:center;
      padding:4px 10px; border:1px dashed var(--border); border-radius:999px;
      font-size:12px; color:var(--muted); background:#fff; margin-top:var(--s-3);
    }

    /* שם המוצר (אנגלית) */
    .card h3{
      margin:var(--s-2) 0 var(--s-2);
      font-size:18px; letter-spacing:.05em; line-height:1.25;
      font-family: Inter, Assistant, Arial, sans-serif;
      font-weight:700; text-align:center;
    }

    /* בחירת נפח */
    .size-row{display:flex;gap:8px;align-items:center;margin:0 0 var(--s-3)}
    .size-label{font-weight:700}
    .size-select{
      flex:1; padding:10px 12px;
      border:1px solid var(--border); border-radius:10px; background:#fff; font-weight:600; direction: rtl; text-align:right;
      appearance:none;
      background-image:
        linear-gradient(45deg, transparent 50%, var(--accent) 50%),
        linear-gradient(135deg, var(--accent) 50%, transparent 50%),
        linear-gradient(to left, #fff, #fff);
      background-position: 16px 50%, 24px 50%, 0 0;
      background-size:8px 8px, 8px 8px, 2.5em 100%;
      background-repeat:no-repeat;
      padding-left:48px;
    }

    /* מחיר – קלאסי, טיפוגרפי */
    .price{margin:0 0 var(--s-2); align-items:baseline; gap:10px; color:var(--fg); display:flex}
    .price-amount{font-weight:800; font-size:20px; letter-spacing:.02em}
    .price-sep{color:#b9a98f}
    .price-size{font-weight:600; font-size:14px; color:var(--muted)}
    @media (max-width: 600px){ .price{justify-content:center} }

    /* הערת 10 מ"ל – קצרה ונקייה */
    .size-note{display:none; margin:0 0 var(--s-3); font-size:13px; color:var(--muted); font-weight:600; text-align:center; line-height:1.35;}
    .size-note.show{display:block}

    /* כפתור */
    .wa-btn{
      margin-top:auto;
      display:inline-block; padding:12px 16px; border-radius:12px; border:1px solid var(--accent); background:#fff; font-weight:700;
      transition:.2s background,.2s transform,.2s box-shadow; text-align:center;
    }
    .wa-btn:hover{background:#fff3e0;transform:translateY(-1px)}
    .wa-btn.disabled{opacity:.55; pointer-events:auto}
    @media (max-width: 600px){ .wa-btn{display:block;width:100%} }

    /* טוסט */
    .toast{position:fixed; z-index:9999; padding:10px 14px; border-radius:12px; background:#111; color:#fff; font-size:14px; box-shadow:var(--shadow); opacity:0; transform:translateY(8px); transition:.2s}
    .toast.show{opacity:1; transform:translateY(0)}

    /* מצב ריק */
    .empty{text-align:center; color:var(--muted); padding:20px 0; font-weight:700;}
  </style>
</head>
<body>
  <header class="wrap">
    <img src="images/logo.png" alt="לוגו המותג" class="logo" onerror="this.style.display='none'">
    <h1>קטלוג בשמי דלוקס סנס</h1>
    <p>ייצור פרטי בכמויות קטנות. בחירה, שאלות והזמנה דרך WhatsApp.</p>
    <a class="cta" id="waTop" target="_blank" rel="noopener">דברו איתי ב-WhatsApp</a>
  </header>

  <main class="wrap">
    <section class="faq">
      <h2>שאלות נפוצות</h2>
      <details><summary>איך מבצעים הזמנה?</summary><div>בוחרים נפח (100 מ״ל / 10 מ״ל / 5 מ״ל), המחיר יוצג, לוחצים על כפתור ה-WhatsApp בכרטיס וההודעה תתמלא אוטומטית.</div></details>
      <details><summary>דוגמיות</summary><div>5 מ״ל — טעימה קצרה • 10 מ״ל — מיכל למילוי-מחדש (Refillable) לנשיאה יומיומית.</div></details>
      <details><summary>משלוחים וזמני הכנה</summary><div>נשלח בד״כ תוך 1–3 ימי עסקים מרגע האישור. איסוף מתואם אפשרי.</div></details>
    </section>

    <!-- סרגל פילטרים -->
    <section class="filters" id="filters">
      <div class="row">
        <div class="f-field">
          <label class="f-label" for="f-q">חיפוש</label>
          <input id="f-q" class="f-input" type="search" placeholder="חפש/י לפי שם מוצר…" />
        </div>
        <div class="f-field">
          <label class="f-label" for="f-brand">מותג</label>
          <select id="f-brand" class="f-select">
            <option value="">הכל</option>
          </select>
        </div>
        <div class="f-field">
          <label class="f-label" for="f-sort">סידור</label>
          <select id="f-sort" class="f-select">
            <option value="">ברירת מחדל</option>
            <option value="p_asc">מחיר 100 מ״ל — נמוך→גבוה</option>
            <option value="p_desc">מחיר 100 מ״ל — גבוה→נמוך</option>
          </select>
        </div>
      </div>
    </section>

    <section class="grid" id="products"></section>
    <div id="empty" class="empty" style="display:none">לא נמצאו מוצרים בהתאמה לסינון</div>
  </main>

  <footer class="wrap">
    <div>© 2025 שם המותג • הזמנה דרך WhatsApp בלבד • פרטי קשר: example@mail.com • 050-0000000</div>
  </footer>

  <script>
    // מספר ה-WhatsApp שלך (בפורמט בינלאומי, ללא +):
    const WA_PHONE = "972508939729";

    // שמות באנגלית (41 פריטים)
    const NAMES = [
      "Amber No.1","Citrus Breeze","Woody Trail","Musk Velvet","Ocean Mist","Spice Route","Rose Garden","Vanilla Beam","Night Oud","Fresh Linen",
      "Golden Sandal","Bergamot Leaf","Cedar Grove","Patchouli Noir","Leather Smoke","Lavender Hill","Fig Blossom","Neroli Sun","White Tea","Ambergris Tide",
      "Tonka Drift","Forest Rain","Saffron Ember","Blackcurrant Muse","Ginger Spark","Tuberose Cloud","Sacred Myrrh","Pine Needle","Pear Shade","Orchid Veil",
      "Cocoa Wood","Jasmine Air","Basil Citrus","Honey Amber","Blue Vetiver","Maple Cedar","Arctic Mint","Ruby Rose","Smoke & Salt","Cashmere Musk","Desert Bloom"
    ];

    // מחירי 100 מ״ל מגוונים לכל מוצר (סידור יעבוד גם בלי בחירה)
    const PRICE_100 = [
      180,195,170,210,185,220,200,175,230,190,
      205,215,225,199,240,185,235,210,200,195,
      205,175,245,190,220,180,225,215,205,235,
      200,210,185,195,240,205,215,225,190,230,200
    ]; // 41 ערכים

    function roundTo5(x){ return Math.round(x/5)*5; }
    function derive10ml(base){ return Math.max(35, roundTo5(base * 0.32)); }
    function derive5ml(base){ return Math.max(20, roundTo5(base * 0.18)); }

    // נתוני מוצרים (brand יוכנס בעתיד; כרגע נציג "שם מותג")
    const products = Array.from({length:41}, (_,i) => {
      const n = i+1;
      const base = PRICE_100[i] || 180;
      return {
        id:n,
        name:NAMES[i] || `Perfume ${n}`,
        brand:"", // ← כשיהיו מותגים אמיתיים נמלא כאן
        sku:`P${String(n).padStart(2,'0')}`,
        price:{ "100":base, "10":derive10ml(base), "5":derive5ml(base) },
        baseImages:[`${n}.jpg`, `${n}-2.jpg`, `${n}-3.jpg`],
        sample10:[`${n}-10.jpg`],
        sample5:[`${n}-5.jpg`],
      };
    });

    const byId = Object.fromEntries(products.map(p=>[String(p.id), p]));
    const selectedById = {}; // שומר בחירת נפח לכל מוצר בין רינדורים

    function buildWaHref(p, sizeLabel, price){
      const lines = [
        "היי! מעוניין/ת בבושם:",
        `${p.name} (קוד: ${p.sku})`,
        `נפח: ${sizeLabel}`,
        price ? `מחיר מוצג: ₪${price}` : null,
        "אשמח לפרטים/הזמנה."
      ].filter(Boolean).join("\n");
      return `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(lines)}`;
    }

    // טוסט עדין
    function showToast(msg, nearEl){
      const t = document.createElement('div');
      t.className = 'toast';
      t.textContent = msg;
      document.body.appendChild(t);
      const r = nearEl.getBoundingClientRect();
      const top = (r.top - 46);
      const left = (r.left + (r.width/2) - (t.offsetWidth/2));
      t.style.top = Math.max(10, top) + 'px';
      t.style.left = Math.max(10, Math.min(left, window.innerWidth - t.offsetWidth - 10)) + 'px';
      requestAnimationFrame(()=> t.classList.add('show'));
      setTimeout(()=>{ t.classList.remove('show'); setTimeout(()=>t.remove(),200); }, 1600);
    }

    // קרוסלה
    function renderImages(card, files){
      const box = card.querySelector('.imagebox');
      box.innerHTML = '';
      files.forEach((file, idx) => {
        const img = document.createElement('img');
        img.src = `images/${file}`;
        img.alt = card.dataset.name || '';
        img.className = idx===0 ? 'active' : '';
        img.onerror = () => { img.remove(); updateNav(); };
        img.onload  = () => { updateNav(); };
        box.appendChild(img);
      });

      const nav = document.createElement('div');
      nav.className = 'cnav';
      nav.innerHTML = `
        <button class="cbtn prev" aria-label="הקודם">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="cbtn next" aria-label="הבא">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 6 15 12 9 18"></polyline>
          </svg>
        </button>`;
      box.appendChild(nav);

      function updateNav(){
        const imgs = box.querySelectorAll('img');
        box.classList.toggle('single', imgs.length <= 1);
      }
      updateNav();

      let idx = 0;
      function goto(n){
        const imgs = [...box.querySelectorAll('img')];
        if (!imgs.length) return;
        idx = (n + imgs.length) % imgs.length;
        imgs.forEach((im,i)=>im.classList.toggle('active', i===idx));
      }
      box.querySelector('.prev').addEventListener('click', ()=> goto(idx-1)); // שמאלה = קודם
      box.querySelector('.next').addEventListener('click', ()=> goto(idx+1)); // ימינה = הבא
    }

    // רינדור כרטיסים
    function renderProducts(list = products){
      const el = document.getElementById('products');
      const empty = document.getElementById('empty');
      if (!list.length){
        el.innerHTML = '';
        empty.style.display = 'block';
        return;
      }
      empty.style.display = 'none';

      el.innerHTML = list.map(p => {
        const displayBrand = (p.brand && p.brand.trim()) ? p.brand : "שם מותג";
        return `
        <article class="card" data-id="${p.id}" data-sku="${p.sku}" data-name="${p.name}" data-brand="${displayBrand}">
          <div class="imagebox"></div>

          <div class="brand-tag">${displayBrand}</div>
          <h3>${p.name}</h3>

          <div class="size-row">
            <span class="size-label">נפח</span>
            <select class="size-select" aria-label="בחר נפח">
              <option value="" ${!selectedById[p.id] ? 'selected' : ''} disabled>בחר נפח…</option>
              <option value="100" ${selectedById[p.id]==="100" ? 'selected' : ''}>100 מ״ל</option>
              <option value="10"  ${selectedById[p.id]==="10"  ? 'selected' : ''}>10 מ״ל (כולל שפריצר)</option>
              <option value="5"   ${selectedById[p.id]==="5"   ? 'selected' : ''}>5 מ״ל</option>
            </select>
          </div>

          <!-- מחיר מוצג כברירת מחדל עבור 100 מ"ל -->
          <div class="price" aria-live="polite">
            <span class="price-amount">₪<span class="price-val">${p.price["100"]}</span></span>
            <span class="price-sep">·</span>
            <span class="price-size">100 מ״ל</span>
          </div>

          <p class="size-note" aria-live="polite"></p>

          <a class="wa-btn ${selectedById[p.id] ? '' : 'disabled'}" href="#" target="_blank" rel="noopener">הזמנה/שאלה ב-WhatsApp</a>
        </article>
      `}).join('');

      // אינטראקציה לכל כרטיס
      document.querySelectorAll('.card').forEach((card)=>{
        const pid = Number(card.dataset.id);
        const p = byId[String(pid)];

        renderImages(card, p.baseImages);

        const select     = card.querySelector('.size-select');
        const priceWrap  = card.querySelector('.price');
        const priceVal   = card.querySelector('.price-val');
        const priceSize  = card.querySelector('.price-size');
        const priceSep   = card.querySelector('.price-sep');
        const noteEl     = card.querySelector('.size-note');
        const waBtn      = card.querySelector('.wa-btn');

        // כפתור – טוסט אם לא נבחר נפח
        waBtn.addEventListener('click', (e)=>{
          if (waBtn.classList.contains('disabled')) {
            e.preventDefault();
            showToast('בחר/י נפח קודם 🙂', waBtn);
          }
        });

        // אם כבר נבחר נפח בעבר – ליישם
        if (selectedById[pid]) {
          applySize(selectedById[pid]);
        } else {
          // מצב התחלתי: מציגים מחיר 100 מ״ל בלבד, הכפתור נשאר דהוי
          priceVal.textContent = p.price["100"];
          priceSize.textContent = "100 מ״ל";
        }

        select.addEventListener('change', e => applySize(e.target.value));

        function applySize(v){
          selectedById[pid] = v;

          if (v === "100"){
            renderImages(card, p.baseImages);
          } else if (v === "10"){
            renderImages(card, p.sample10.concat(p.baseImages));
          } else if (v === "5"){
            renderImages(card, p.sample5.concat(p.baseImages));
          }

          const price = p.price[v];
          priceVal.textContent = price;
          const sizeLabelHe = (v==="100" ? "100 מ״ל" : v==="10" ? "10 מ״ל" : "5 מ״ל");
          priceSize.textContent = sizeLabelHe;
          priceSep.style.display = price && sizeLabelHe ? 'inline' : 'none';

          // הערת 10 מ"ל בלבד
          if (v === "10"){
            noteEl.textContent = "כולל שפריצר למילוי-מחדש (Refillable)";
            noteEl.classList.add('show');
          } else {
            noteEl.textContent = "";
            noteEl.classList.remove('show');
          }

          waBtn.href = buildWaHref(p, sizeLabelHe, price);
          waBtn.classList.remove('disabled');
        }
      });
    }

    // ===== סרגל פילטרים =====
    function uniqueBrands(list){
      const s = new Set();
      list.forEach(p => {
        const displayBrand = (p.brand && p.brand.trim()) ? p.brand : "שם מותג";
        s.add(displayBrand);
      });
      return Array.from(s);
    }

    function renderBrandOptions(list){
      const sel = document.getElementById('f-brand');
      const prev = sel.value;
      sel.innerHTML = `<option value="">הכל</option>`;
      uniqueBrands(list).forEach(b=>{
        const opt = document.createElement('option');
        opt.value = b; opt.textContent = b;
        sel.appendChild(opt);
      });
      if ([...sel.options].some(o=>o.value===prev)) sel.value = prev;
    }

    function applyFilters(){
      const q = document.getElementById('f-q').value.trim().toLowerCase();
      const brandSel = document.getElementById('f-brand').value;
      const sort = document.getElementById('f-sort').value;

      let list = products.filter(p=>{
        const displayBrand = (p.brand && p.brand.trim()) ? p.brand : "שם מותג";
        const matchName = !q || (p.name || '').toLowerCase().includes(q);
        const matchBrand = !brandSel || displayBrand === brandSel;
        return matchName && matchBrand;
      });

      if (sort === 'p_asc') {
        list = list.slice().sort((a,b)=> (a.price["100"]||0) - (b.price["100"]||0));
      } else if (sort === 'p_desc') {
        list = list.slice().sort((a,b)=> (b.price["100"]||0) - (a.price["100"]||0));
      }

      renderProducts(list);
    }

    function initFilters(){
      renderBrandOptions(products);
      document.getElementById('f-q').addEventListener('input', applyFilters);
      document.getElementById('f-brand').addEventListener('change', applyFilters);
      document.getElementById('f-sort').addEventListener('change', applyFilters);
    }

    // ===== Top WhatsApp =====
    function initTopWA(){
      const waTop = document.getElementById('waTop');
      if (waTop) waTop.href = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent('היי! מעוניין/ת בבשמים. אשמח לפרטים על נפחים ודוגמיות.')}`;
    }

    // ===== Init =====
    document.addEventListener('DOMContentLoaded', ()=>{
      initFilters();
      renderProducts(); // רינדור ראשון
      initTopWA();
    });
  </script>
</body>
</html>
